"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7213],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,g=c["".concat(s,".").concat(m)]||c[m]||d[m]||i;return n?a.createElement(g,l(l({ref:t},u),{},{components:n})):a.createElement(g,l({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1016:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={id:"android-playwright-quickstart",title:"Playwright"},l=void 0,o={unversionedId:"Automated testing/android-playwright-quickstart",id:"Automated testing/android-playwright-quickstart",title:"Playwright",description:"\ud83c\udfad Playwright Quickstart",source:"@site/docs/Automated testing/playwright.md",sourceDirName:"Automated testing",slug:"/Automated testing/android-playwright-quickstart",permalink:"/docs/Automated testing/android-playwright-quickstart",draft:!1,editUrl:"https://github.com/smartdust-me/docs/blob/main/docs/Automated testing/playwright.md",tags:[],version:"current",frontMatter:{id:"android-playwright-quickstart",title:"Playwright"},sidebar:"tutorialSidebar",previous:{title:"Maestro",permalink:"/docs/Automated testing/android-maestro-quickstart"},next:{title:"SmartDust CLI Client version 1.2.x",permalink:"/docs/CLI Lab client/cli-client-1-2"}},s={},p=[{value:"\ud83c\udfad Playwright Quickstart",id:"-playwright-quickstart",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"\ud83d\udd0c Step 1: Connect to Device",id:"-step-1-connect-to-device",level:2},{value:"Step 2: Upload your app to the device.",id:"step-2-upload-your-app-to-the-device",level:2},{value:"Step 3: Install Playwright",id:"step-3-install-playwright",level:2},{value:"Step 4: Write Your Test:",id:"step-4-write-your-test",level:2},{value:"\u25b6\ufe0f Step 5: Run Your Tests",id:"\ufe0f-step-5-run-your-tests",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...i}=e;return(0,r.kt)(c,(0,a.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"-playwright-quickstart"},"\ud83c\udfad Playwright Quickstart"),(0,r.kt)("p",null,"Playwright is a fast and reliable end-to-end testing framework for modern web applications. It enables you to write expressive tests in JavaScript, TypeScript, Python, Java, or C#, and supports all major browsers \u2014 including Chromium, Firefox, and WebKit \u2014 with a single unified API."),(0,r.kt)("p",null,"Playwright documentation:\n",(0,r.kt)("inlineCode",{parentName:"p"},"https://playwright.dev/docs/intro")),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"Before you begin, ensure you have the following installed:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("strong",{parentName:"li"},"SmartDust")," account"),(0,r.kt)("li",{parentName:"ul"},"Your ",(0,r.kt)("strong",{parentName:"li"},"SmartDust device remote debug key")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Node.js v20+")),(0,r.kt)("li",{parentName:"ul"},"Installed ",(0,r.kt)("strong",{parentName:"li"},"Android SDK + ADB")),(0,r.kt)("li",{parentName:"ul"},"Optional: your ",(0,r.kt)("inlineCode",{parentName:"li"},".apk")," or app build process ready")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"-step-1-connect-to-device"},"\ud83d\udd0c Step 1: Connect to Device"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Navigate to Dashboard"),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Remote debug")," in the device card (top-left corner or settings)"),(0,r.kt)("li",{parentName:"ol"},"Enable remote ADB access")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Smart Dust lab remote debug",src:n(1094).Z,width:"1352",height:"330"})),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Copy the generated ADB command, e.g.:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"adb connect 123.45.67.89.smartdust.me:5555\n")),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"Paste into your terminal and run it"),(0,r.kt)("li",{parentName:"ol"},"Back in the dashboard, accept the ADB key request (if no popup, toggle remote debug off/on)\nVerify your device is connected:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"adb devices\n")),(0,r.kt)("p",null,"Expected output:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"List of devices attached\n123.45.67.89.smartdust.me:5555   device\n")),(0,r.kt)("p",null,"If it says offline, retry the connection."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"step-2-upload-your-app-to-the-device"},"Step 2: Upload your app to the device."),(0,r.kt)("p",null,"We will upload based on the Dust app: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://github.com/damiant/dust"),".\nSo, firstly build the app, for example, using ",(0,r.kt)("inlineCode",{parentName:"p"},"bunx ng build")," and then deploy the app using ",(0,r.kt)("inlineCode",{parentName:"p"},"npx cap run android"),".\nYou should see the app on your device."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Smart Dust lab apk upload",src:n(1965).Z,width:"1092",height:"824"})),(0,r.kt)("p",null,"If not, check you terminal for potential issues."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"step-3-install-playwright"},"Step 3: Install Playwright"),(0,r.kt)("p",null,"You can install Playwright using the official generator:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm init playwright@latest\n")),(0,r.kt)("p",null,"This will:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Set up a new test project"),(0,r.kt)("li",{parentName:"ul"},"Let you choose language (TypeScript/JS)"),(0,r.kt)("li",{parentName:"ul"},"Optionally install browsers (Chromium, Firefox, WebKit)")),(0,r.kt)("p",null,"Example setup output:\n\u2714 Where to put your end-to-end tests? \xb7 tests\n\u2714 Add a GitHub Actions workflow? \xb7 Yes\n\u2714 Install Playwright browsers? \xb7 Yes"),(0,r.kt)("p",null,"Once installed, try running the example tests:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npx playwright test\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"step-4-write-your-test"},"Step 4: Write Your Test:"),(0,r.kt)("p",null,"We will test the connection with the device by simply taking a screenshot:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"import { _android as android } from 'playwright';\nimport { execSync } from 'child_process';\nimport fs from 'fs';\n\n(async () => {\n  const devices = await android.devices();\n  const device = devices[0];\n\n  const model = await device.model();\n  const serial = await device.serial();\n\n  console.log('\u2705 Connected to Android Device');\n  console.log('\ud83d\udcf1 Model:', model);\n  console.log('\ud83d\udd0c Serial (masked):', serial.slice(0, 4) + '****');\n\n  console.log('\ud83d\udcf8 Taking screenshot via ADB...');\n\n  const adbCommand = `adb -s ${serial} exec-out screencap -p`;\n  const screenshot = execSync(adbCommand);\n\n  fs.writeFileSync('device-screen.png', screenshot);\n  console.log('\u2705 Screenshot saved as device-screen.png');\n\n  await device.close();\n})();\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"\ufe0f-step-5-run-your-tests"},"\u25b6\ufe0f Step 5: Run Your Tests"),(0,r.kt)("p",null,"You can now simply run the playwright tests on your device using:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npx tsx NAME_OF_THE_TEST.ts\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Smart Dust lab playwright test",src:n(1759).Z,width:"595",height:"140"})))}d.isMDXComponent=!0},1965:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/apk_upload-37ba3b14e26bd51a96568d9399d9b203.png"},1759:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/playwright_test-5e3975d544442ef1f85004b65bf31120.png"},1094:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/remote_debug-d950372de34faaee911354a71b1a0d7e.png"}}]);